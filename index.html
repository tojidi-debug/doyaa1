<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>한에스시스템</title>
  <style>
    /* 기본 초기화 */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      /* 보안: 드래그 방지 */
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    body, html {
      width: 100%;
      height: 100%;
      overflow: hidden; /* 스크롤바 방지 */
      font-family: 'Nanum Gothic', 'NanumGothic', Arial, sans-serif;
      background: black; /* 기본 배경 */
    }

    /* ========================================
      1. 로그인 화면 스타일 (우주 배경 포함) 
      ========================================
    */
    #login-screen {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 1000; /* iframe보다 위에 위치 */
      background: 
        radial-gradient(ellipse at top, #1a237e 0%, #0a0e27 50%),
        radial-gradient(ellipse at bottom, #0d1b3e 0%, #000000 100%);
    }

    /* 우주 배경 애니메이션 */
    @keyframes starfield {
      0% { transform: translateY(0); }
      100% { transform: translateY(-2000px); }
    }
    .space-bg {
      position: absolute;
      top: 0; left: 0; width: 100%; height: 100%;
      background: 
        radial-gradient(2px 2px at 20% 30%, white, transparent),
        radial-gradient(2px 2px at 60% 70%, white, transparent),
        radial-gradient(1px 1px at 50% 50%, white, transparent),
        radial-gradient(1px 1px at 80% 10%, white, transparent);
      background-size: 200% 200%;
      animation: starfield 200s linear infinite;
      opacity: 0.6; pointer-events: none;
    }
    .stars { position: absolute; width: 100%; height: 100%; pointer-events: none; }
    .star {
      position: absolute; width: 2px; height: 2px; background: white; border-radius: 50%;
      box-shadow: 0 0 4px rgba(255, 255, 255, 0.8);
    }

    /* 로그인 박스 */
    .container-box {
      position: absolute;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(13, 27, 62, 0.95);
      backdrop-filter: blur(20px);
      padding: 50px 40px;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.5), 0 0 50px rgba(28,181,224,0.3) inset;
      border: 1px solid rgba(28,181,224,0.5);
      width: 400px; max-width: 90%;
      text-align: center;
      display: none;
    }
    .container-box.active { display: block; }

    /* 텍스트 & 버튼 스타일 */
    .logo-text { font-size: 24px; font-weight: 800; color: #fff; margin-bottom: 5px; text-shadow: 0 0 15px rgba(28,181,224,0.8); }
    .logo-version { font-size: 14px; color: #8a2be2; margin-bottom: 30px; }
    .info-text { color: rgba(255,255,255,0.9); font-size: 16px; margin-bottom: 20px; }
    
    .input-group input {
      width: 100%; padding: 12px; margin-bottom: 20px;
      border: 1px solid rgba(28,181,224,0.3); border-radius: 8px;
      background: rgba(255,255,255,0.1); color: #fff;
      -webkit-user-select: text; user-select: text; /* 입력창은 드래그 허용 */
    }
    
    .login-btn {
      width: 100%; padding: 14px; border: none; border-radius: 8px;
      background: linear-gradient(135deg, rgba(28,181,224,0.8), rgba(91,134,229,0.8));
      color: #fff; font-weight: 600; cursor: pointer;
    }
    .loading { display: none; color: #fff; font-size: 14px; margin-top: 15px; }
    .loading.show { display: block; }

    /* ========================================
      2. 메인 콘텐츠 (Iframe) 영역 
      ========================================
    */
    #main-content {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      display: none; /* 로그인 전에는 숨김 */
      background: white;
    }

    /* 상단 미니 헤더 (선택 사항 - 필요 없으면 height 0으로) */
    .mini-header {
      width: 100%;
      height: 0px; /* 헤더가 안 보이게 설정 (원하면 px 조절) */
      background: #0d1b3e;
    }

    /* 실제 사이트가 보일 창문 */
    iframe {
      width: 100%;
      height: 100%; /* 전체 화면 채우기 */
      border: none;
      display: block;
    }

    /* 아이콘 스타일 */
    .icon-large { width: 60px; height: 60px; margin: 0 auto 20px; display: block; }
    .icon-success { fill: #4facfe; }
    .icon-denied { fill: #ff6b6b; }

  </style>
</head>
<body oncontextmenu="return false" ondragstart="return false" onselectstart="return false">

  <div id="login-screen">
    <div class="space-bg"></div>
    <div class="stars" id="stars"></div>

    <div class="container-box" id="loginContainer">
      <div class="logo-area">
        <div class="logo-text">한에스시스템</div>
        <div class="logo-version">[V1.0]</div>
      </div>
      <div class="info-text">등록된 이메일을 입력하세요</div>
      
      <form onsubmit="checkEmail(event)">
        <div class="input-group">
          <input type="email" id="email" placeholder="example@email.com" required autocomplete="email">
        </div>
        <button type="submit" class="login-btn" id="loginBtn">확인</button>
        <div class="loading" id="loading">확인 중...</div>
      </form>
    </div>

    <div class="container-box" id="welcomeContainer">
      <svg class="icon-large icon-success" viewBox="0 0 24 24">
        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
      </svg>
      <div class="info-text" style="font-size: 18px; font-weight: bold; color: #4facfe;">반가워요~</div>
      <div class="info-text">사용자가 확인되어서 접속 가능합니다.</div>
      <div class="loading show" style="margin-top:0;">사이트를 불러오는 중...</div>
    </div>

    <div class="container-box" id="accessDenied">
      <svg class="icon-large icon-denied" viewBox="0 0 24 24">
        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 11c-.55 0-1-.45-1-1V8c0-.55.45-1 1-1s1 .45 1 1v4c0 .55-.45 1-1 1zm1 4h-2v-2h2v2z"/>
      </svg>
      <div class="info-text" style="color:#ff6b6b; font-weight:bold;">접근 제한</div>
      <div class="info-text">등록되지 않은 유저는<br>사이트 이용에 제한이 있습니다.</div>
    </div>
  </div>


  <div id="main-content">
    <div class="mini-header"></div> <iframe id="contentFrame" title="Main Content"></iframe>
  </div>


  <script>
    // [설정] 허용할 이메일 목록
    const ALLOWED_EMAILS = [
      'tojidi@gmail.com',
      'kjloveh8@gmail.com',
      'wony93680@gmail.com',
      'jesussw0410@gmail.com',
      'juhlee0420@gmail.com',
      'ohdass12@gmail.com',
      'purityma1@gmail.com'
    ];
    
    // [중요] 실제 내용을 불러올 주소 (home)
    const TARGET_URL = 'https://tojidi-debug.github.io/home/';


    // 보안: 개발자 도구 및 우클릭 차단
    document.addEventListener('contextmenu', e => e.preventDefault());
    document.addEventListener('keydown', e => {
      if(e.key === 'F12' || (e.ctrlKey && (e.key === 'u' || e.key === 'U' || (e.shiftKey && (e.key === 'I' || e.key === 'J'))))) {
        e.preventDefault(); return false;
      }
    });

    // 별 배경 효과
    function createStars() {
      const c = document.getElementById('stars');
      for(let i=0; i<80; i++){
        let s = document.createElement('div');
        s.className = 'star';
        s.style.left = Math.random()*100+'%'; s.style.top = Math.random()*100+'%';
        s.style.animationDelay = Math.random()*3+'s';
        c.appendChild(s);
      }
    }

    window.onload = function() {
      createStars();
      
      const savedEmail = localStorage.getItem('myVerifiedEmail');
      // 자동 로그인
      if (savedEmail && ALLOWED_EMAILS.includes(savedEmail)) {
        showContainer('welcomeContainer');
        setTimeout(() => {
          loadMainSite(); // 페이지 이동 대신 iframe 로딩 실행
        }, 1500);
      } else {
        showContainer('loginContainer');
      }
    };

    function showContainer(id) {
      document.querySelectorAll('.container-box').forEach(el => el.classList.remove('active'));
      document.getElementById(id).classList.add('active');
    }

    function checkEmail(e) {
      e.preventDefault();
      const email = document.getElementById('email').value.trim().toLowerCase();
      const btn = document.getElementById('loginBtn');
      const load = document.getElementById('loading');

      btn.disabled = true;
      load.classList.add('show');

      setTimeout(() => {
        if (ALLOWED_EMAILS.includes(email)) {
          localStorage.setItem('myVerifiedEmail', email);
          showContainer('welcomeContainer');
          setTimeout(() => {
            loadMainSite(); // 페이지 이동 대신 iframe 로딩 실행
          }, 1500);
        } else {
          load.classList.remove('show');
          btn.disabled = false;
          showContainer('accessDenied');
        }
      }, 800);
    }

    // [핵심] 로그인 성공 시 Iframe으로 사이트 열기
    function loadMainSite() {
      // 1. iframe에 주소 주입 (로그인 전에는 빈 껍데기였음)
      const frame = document.getElementById('contentFrame');
      frame.src = TARGET_URL;

      // 2. 로그인 화면(우주 배경)을 서서히 사라지게 하거나 즉시 숨김
      const loginScreen = document.getElementById('login-screen');
      const mainContent = document.getElementById('main-content');
      
      // 전환 효과
      loginScreen.style.transition = 'opacity 0.5s';
      loginScreen.style.opacity = '0';
      
      mainContent.style.display = 'block';

      setTimeout(() => {
        loginScreen.style.display = 'none'; // 완전히 제거
      }, 500);
    }
  </script>

</body>
</html>



